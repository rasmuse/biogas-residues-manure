/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2016. MIT licensed.
 */
!function(e,t,a){"use strict";"function"!=typeof Object.assign&&!function(){Object.assign=function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var s=arguments[n];if(s!==a&&null!==s)for(var r in s)s.hasOwnProperty(r)&&(t[r]=s[r])}return t}}();var n=9e5,s=899500,r=7401e3,o=55e5,c=[s,n],i=[o,r],l=[c,i];!function(){function e(e){var t="assets/substrates/"+e.key+".png";t in f||(f[t]=L.imageOverlay(t,l));for(var a in f)g.removeLayer(f[a]);g.addLayer(f[t],{pane:"substrates"});var n="assets/substrates/cbar_"+e.key+".png",s=d3.select("#substrates-colorbar").selectAll("img").data([n]);s.enter().append("img"),s.attr("src",function(e){return e});var s=d3.select("#substrates-colorbar").selectAll("img").data([n]);d3.select("#map-caption").text(e.label),d3.select("#map-unit").html(e.unit)}var t=Math.abs(r-n),a=Math.abs(s-o),c=d3.select("#substrates-map").node().getBoundingClientRect(),i=c.width,u=c.height,d=i/t,p=u/a,b=Math.ceil(Math.log2(Math.min(d,p))),g=L.map("substrates-map",{minZoom:b,center:[(s+o)/2,.55*(r+n)],zoom:b,crs:L.CRS.Simple,maxBounds:l});g.createPane("substrates"),g.getPane("substrates").style.zIndex=500;var f={};d3.json("assets/ne_bbox.geojson",function(e,t){g.createPane("bg"),g.getPane("bg").style.zIndex=300,g.createPane("outline"),g.getPane("outline").style.zIndex=1e3;var a=L.geoJson(t,{fillColor:"#cccccc",weight:0,fillOpacity:1,pane:"bg"});a.addTo(g);var n=L.geoJson(t,{color:"#333333",weight:1,opacity:1,fillOpacity:0,pane:"outline"});n.addTo(g)}),d3.json("assets/substrates/substrates.json",function(t,a){var n=d3.select("#substrate-picker").selectAll("div").data(a).enter().append("div");n.append("h2").text(function(e){return e.heading}),n.each(function(t){var a=d3.select(this).selectAll("label").data(t.items).enter().append("label");a.append("input").attr("type","radio").attr("name","substrates").on("change",e),a.append("span").text(function(e){return" "+e.label})}),d3.select("#substrate-picker input:first-of-type").property("checked",!0).each(e)})}()}(window,document);